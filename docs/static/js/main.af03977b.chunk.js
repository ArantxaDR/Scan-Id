(this["webpackJsonpz1-frontend-developer"]=this["webpackJsonpz1-frontend-developer"]||[]).push([[0],{15:function(e,t,c){},23:function(e,t,c){},24:function(e,t,c){},26:function(e,t,c){},32:function(e,t,c){},33:function(e,t,c){"use strict";c.r(t);var n=c(0),a=c.n(n),i=c(17),r=c.n(i),s=(c(23),c(7)),l=c(2),u=(c(24),c(1));function o(){return Object(u.jsx)("header",{className:"header",children:Object(u.jsx)("h1",{className:"header-title",children:"BankClient"})})}c(15),c(26);var j=c.p+"static/media/check.2fa1832b.svg",d=c.p+"static/media/fail.4091893d.svg",b=c(8);function h(e){var t=Object(n.useState)(""),c=Object(s.a)(t,2),a=c[0],i=c[1],r=Object(n.useState)("link"),l=Object(s.a)(r,2),h=l[0],m=l[1],O=Object(n.useState)("Take picture"),f=Object(s.a)(O,2),p=f[0],g=f[1],x=Object(n.useState)("hiden"),v=Object(s.a)(x,2),S=v[0],k=v[1];Object(n.useEffect)((function(){N()}));var N=function(){""===e.pictureStatus?(m("link"),g("Take picture")):"ACCEPTED"===e.pictureStatus?(i("accepted"),m("hiden"),k("label labelaccepted")):"REJECTED"===e.pictureStatus&&(g("Retake picture"),i("rejected"),m("link"),k("label labelrejected"))};return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(o,{}),Object(u.jsxs)("main",{className:"main",children:[Object(u.jsx)("h2",{className:"main-title",children:"Scan your ID"}),Object(u.jsx)("p",{className:"main-title__text",children:"Take a picture. It may take time to validate your personal information."}),Object(u.jsx)("div",{className:"ID",children:Object(u.jsxs)("div",{className:"ID-container",children:[Object(u.jsx)("img",{className:"".concat(a," ID-container__img mirror"),src:e.imgSrc,title:"picture",alt:""}),Object(u.jsx)(b.b,{to:"/take-photo",title:"takephoto",className:h,children:Object(u.jsx)("button",{className:"link-btn",children:p})}),Object(u.jsxs)("div",{className:S,children:[Object(u.jsx)("img",{src:"ACCEPTED"===e.pictureStatus?j:d,alt:e.pictureStatus,"data-testid":"icon"}),Object(u.jsx)("span",{children:e.pictureStatus})]})]})})]})]})}c(32);var m=c.p+"static/media/Alert.4e33b28b.svg",O=function(e){return fetch("https://front-exercise.z1.digital/evaluations",{method:"post",body:JSON.stringify({img:e})}).then((function(e){return e.json()})).then((function(e){return e.summary.outcome}))},f=Object(l.f)((function(e){var t=Object(n.useState)(""),c=Object(s.a)(t,2),a=c[0],i=c[1],r=Object(n.useState)("hiden"),l=Object(s.a)(r,2),o=l[0],j=l[1],d=Object(n.useRef)(0),h=Object(n.useRef)(null),f=260,p=160;Object(n.useEffect)((function(){g()}),[h]);var g=function(){navigator.mediaDevices.getUserMedia({video:{width:f,height:p}}).then((function(e){var t=h.current;null!==t&&(t.srcObject=e,t.play())})).catch((function(e){console.error("error:",e)}))},x=function(){var e=h.current;if(clearInterval(d.current),null!==e){var t=e.srcObject;if(null!==t)t.getTracks().forEach((function(e){e.stop()}));e.srcObject=null}},v=Object(n.useCallback)((function(){var t="",c=h.current,n=document.createElement("canvas"),a=null===n||void 0===n?void 0:n.getContext("2d");null!==n&&(n.width=f,n.height=p),d.current=window.setInterval((function(){null!==a&&null!==c&&(a.drawImage(c,0,0,f,p),t=n.toDataURL("image/jpg"),e.setImgSrc(t),S(t))}),1500)}),[h,e.setImgSrc,d]),S=function(t){O(t).then((function(t){"Approved"===t?(j("hiden"),i("accepted"),e.setPictureStatus("ACCEPTED"),x(),e.history.push("/")):(j("camera-container__alert"),i("rejected"),e.setPictureStatus("REJECTED"))}))};return Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)("div",{className:"container",children:[Object(u.jsx)("h1",{className:"container-title",children:"Take picture"}),Object(u.jsx)("p",{className:"container-title__text",children:"Fit your ID card inside the frame. The picture will be taken automatically."}),Object(u.jsx)("video",{className:"".concat(a," camera-container mirror"),muted:!0,onCanPlay:function(){return v()},ref:h}),Object(u.jsxs)("p",{className:o,children:[Object(u.jsx)("img",{src:m,alt:"Alert"}),"Room lighting is too low"]}),Object(u.jsx)(b.b,{to:"/",className:" cancel ",title:"ScanID",onClick:x,children:"Cancel"})]})})})),p=c.p+"static/media/IDbg.a826b8dc.svg";var g=function(){var e=Object(n.useState)(""),t=Object(s.a)(e,2),c=t[0],a=t[1],i=Object(n.useState)(p),r=Object(s.a)(i,2),o=r[0],j=r[1];return Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)(l.c,{children:[Object(u.jsx)(l.a,{exact:!0,path:"/",render:function(e){return Object(u.jsx)(h,{pictureStatus:c,imgSrc:o})}}),Object(u.jsx)(l.a,{path:"/take-photo/",render:function(e){return Object(u.jsx)(f,{pictureStatus:c,setPictureStatus:a,setImgSrc:j})}})]})})},x=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,34)).then((function(t){var c=t.getCLS,n=t.getFID,a=t.getFCP,i=t.getLCP,r=t.getTTFB;c(e),n(e),a(e),i(e),r(e)}))};r.a.render(Object(u.jsx)(a.a.StrictMode,{children:Object(u.jsx)(b.a,{children:Object(u.jsx)(g,{})})}),document.getElementById("root")),x()}},[[33,1,2]]]);
//# sourceMappingURL=main.af03977b.chunk.js.map