(this["webpackJsonpz1-frontend-developer"]=this["webpackJsonpz1-frontend-developer"]||[]).push([[0],{15:function(e,t,c){},23:function(e,t,c){},24:function(e,t,c){},26:function(e,t,c){},27:function(e,t,c){},33:function(e,t,c){},34:function(e,t,c){"use strict";c.r(t);var a=c(0),n=c.n(a),r=c(17),i=c.n(r),s=(c(23),c(7)),l=c(2),o=(c(24),c(1));function u(){return Object(o.jsx)("header",{className:"header",children:Object(o.jsx)("h1",{className:"header-title",children:"Big brother is watching"})})}var j=c.p+"static/media/bigBrother.ae71e636.png";c(26);function b(){return Object(o.jsxs)("div",{className:"footer",children:[Object(o.jsxs)("small",{className:"footer-text",children:["Made with ",Object(o.jsx)("img",{className:"footer-img",alt:"",src:j}),"by \xa9ArantxaDR 2021"]}),Object(o.jsx)("small",{className:"footer-text",children:"Camera by Anton Barbarov from the Noun Project"})]})}c(15),c(27);var d=c.p+"static/media/check.2fa1832b.svg",h=c.p+"static/media/fail.4091893d.svg",m=c(8);function O(e){var t=Object(a.useState)(""),c=Object(s.a)(t,2),n=c[0],r=c[1],i=Object(a.useState)("link"),l=Object(s.a)(i,2),j=l[0],O=l[1],f=Object(a.useState)("Take picture"),p=Object(s.a)(f,2),x=p[0],g=p[1],v=Object(a.useState)("hiden"),S=Object(s.a)(v,2),N=S[0],k=S[1];Object(a.useEffect)((function(){C()}));var C=function(){""===e.pictureStatus?(O("link"),g("Take picture")):"ACCEPTED"===e.pictureStatus?(r("accepted"),O("hiden"),k("label labelaccepted")):"REJECTED"===e.pictureStatus&&(g("Retake picture"),r("rejected"),O("link"),k("label labelrejected"))};return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(u,{}),Object(o.jsxs)("main",{className:"main",children:[Object(o.jsx)("h2",{className:"main-title",children:"Scan your ID"}),Object(o.jsx)("p",{className:"main-title__text",children:"Take a picture. It may take time to validate your personal information."}),Object(o.jsx)("div",{className:"ID",children:Object(o.jsxs)("div",{className:"ID-container",children:[Object(o.jsx)("img",{className:"".concat(n," ID-container__img mirror"),src:e.imgSrc,title:"picture",alt:""}),Object(o.jsx)(m.b,{to:"/take-photo",title:"takephoto",className:j,children:Object(o.jsx)("button",{className:"link-btn",children:x})}),Object(o.jsxs)("div",{className:N,children:[Object(o.jsx)("img",{src:"ACCEPTED"===e.pictureStatus?d:h,alt:e.pictureStatus,"data-testid":"icon"}),Object(o.jsx)("span",{children:e.pictureStatus})]})]})})]}),Object(o.jsx)(b,{})]})}c(33);var f=c.p+"static/media/Alert.4e33b28b.svg",p=function(e){return fetch("https://front-exercise.z1.digital/evaluations",{method:"post",body:JSON.stringify({img:e})}).then((function(e){return e.json()})).then((function(e){return e.summary.outcome}))},x=Object(l.f)((function(e){var t=Object(a.useState)(""),c=Object(s.a)(t,2),n=c[0],r=c[1],i=Object(a.useState)("hiden"),l=Object(s.a)(i,2),u=l[0],j=l[1],b=Object(a.useRef)(0),d=Object(a.useRef)(null),h=260,O=160;Object(a.useEffect)((function(){x()}),[d]);var x=function(){navigator.mediaDevices.getUserMedia({video:{width:h,height:O}}).then((function(e){var t=d.current;null!==t&&(t.srcObject=e,t.play())})).catch((function(e){console.error("error:",e)}))},g=function(){var e=d.current;if(clearInterval(b.current),null!==e){var t=e.srcObject;if(null!==t)t.getTracks().forEach((function(e){e.stop()}));e.srcObject=null}},v=Object(a.useCallback)((function(){var t="",c=d.current,a=document.createElement("canvas"),n=null===a||void 0===a?void 0:a.getContext("2d");null!==a&&(a.width=h,a.height=O),b.current=window.setInterval((function(){null!==n&&null!==c&&(n.drawImage(c,0,0,h,O),t=a.toDataURL("image/jpg"),e.setImgSrc(t),S(t))}),1500)}),[d,e.setImgSrc,b]),S=function(t){p(t).then((function(t){"Approved"===t?(j("hiden"),r("accepted"),e.setPictureStatus("ACCEPTED"),g(),e.history.push("/")):(j("camera-container__alert"),r("rejected"),e.setPictureStatus("REJECTED"))}))};return Object(o.jsx)(o.Fragment,{children:Object(o.jsxs)("div",{className:"container",children:[Object(o.jsx)("h1",{className:"container-title",children:"Take picture"}),Object(o.jsx)("p",{className:"container-title__text",children:"Fit your ID card inside the frame. The picture will be taken automatically."}),Object(o.jsx)("video",{className:"".concat(n," camera-container mirror"),muted:!0,onCanPlay:function(){return v()},ref:d}),Object(o.jsxs)("p",{className:u,children:[Object(o.jsx)("img",{src:f,alt:"Alert"}),"Room lighting is too low"]}),Object(o.jsx)(m.b,{to:"/",className:" cancel ",title:"ScanID",onClick:g,children:"Cancel"})]})})})),g=c.p+"static/media/IDbg.a826b8dc.svg";var v=function(){var e=Object(a.useState)(""),t=Object(s.a)(e,2),c=t[0],n=t[1],r=Object(a.useState)(g),i=Object(s.a)(r,2),u=i[0],j=i[1];return Object(o.jsx)(o.Fragment,{children:Object(o.jsxs)(l.c,{children:[Object(o.jsx)(l.a,{exact:!0,path:"/",render:function(e){return Object(o.jsx)(O,{pictureStatus:c,imgSrc:u})}}),Object(o.jsx)(l.a,{path:"/take-photo/",render:function(e){return Object(o.jsx)(x,{pictureStatus:c,setPictureStatus:n,setImgSrc:j})}})]})})},S=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,35)).then((function(t){var c=t.getCLS,a=t.getFID,n=t.getFCP,r=t.getLCP,i=t.getTTFB;c(e),a(e),n(e),r(e),i(e)}))};i.a.render(Object(o.jsx)(n.a.StrictMode,{children:Object(o.jsx)(m.a,{children:Object(o.jsx)(v,{})})}),document.getElementById("root")),S()}},[[34,1,2]]]);
//# sourceMappingURL=main.03d76617.chunk.js.map